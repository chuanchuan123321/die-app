# ğŸš€ å¿«é€Ÿéƒ¨ç½²åˆ°çœŸæœº+æœåŠ¡å™¨

## æ‚¨éœ€è¦çš„ä¿®æ”¹

æ˜¯çš„ï¼Œéœ€è¦ä¿®æ”¹APIåœ°å€ï¼æˆ‘å·²ä¸ºæ‚¨å‡†å¤‡å¥½äº†ä¸€åˆ‡ã€‚

## æ–¹å¼1: ä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆæ¨èï¼‰â­

### æ­¥éª¤1: è·å–æœåŠ¡å™¨IP

```bash
# åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šè¿è¡Œ
curl ifconfig.me
```

å‡è®¾è¾“å‡ºæ˜¯ï¼š`123.45.67.89`

### æ­¥éª¤2: ä½¿ç”¨è„šæœ¬æ„å»ºAPK

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
./build.sh http://123.45.67.89:3000/api
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… è®¾ç½®APIåœ°å€
- âœ… æ„å»ºRelease APK
- âœ… æ˜¾ç¤ºAPKä½ç½®

### æ­¥éª¤3: ä¼ è¾“å¹¶å®‰è£…

```bash
# ç”Ÿæˆçš„APKä½ç½®
build/app/outputs/flutter-apk/app-release.apk

# ä¼ è¾“åˆ°æ‰‹æœºï¼ˆé€‰æ‹©ä¸€ç§æ–¹å¼ï¼‰
# æ–¹å¼1: å¾®ä¿¡/QQå‘é€
# æ–¹å¼2: äº‘ç›˜ï¼ˆç™¾åº¦ç½‘ç›˜ã€é˜¿é‡Œäº‘ç›˜ç­‰ï¼‰
# æ–¹å¼3: æ•°æ®çº¿
```

## æ–¹å¼2: æ‰‹åŠ¨ä¿®æ”¹é…ç½®

### æ­¥éª¤1: ä¿®æ”¹é…ç½®æ–‡ä»¶

ç¼–è¾‘ `lib/config/app_config.dart`:

```dart
static const String apiBaseUrl = String.fromEnvironment(
  'API_BASE_URL',
  defaultValue: 'http://123.45.67.89:3000/api', // ğŸ‘ˆ æ”¹ä¸ºæ‚¨çš„æœåŠ¡å™¨IP
);
```

### æ­¥éª¤2: æ„å»ºAPK

```bash
flutter build apk --release
```

## æœåŠ¡å™¨é…ç½®

### 1. å¼€æ”¾é˜²ç«å¢™ç«¯å£

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
sudo ufw allow 3000/tcp
sudo ufw reload
```

### 2. æµ‹è¯•APIæ˜¯å¦å¯è®¿é—®

```bash
# åœ¨æ‰‹æœºæµè§ˆå™¨è®¿é—®
http://123.45.67.89:3000/health
```

åº”è¯¥è¿”å›ï¼š
```json
{"status":"ok","timestamp":"..."}
```

### 3. ä½¿ç”¨PM2ç®¡ç†åç«¯ï¼ˆæ¨èï¼‰

```bash
# SSHç™»å½•æœåŠ¡å™¨
ssh user@123.45.67.89

# ä¸Šä¼ ä»£ç 
scp -r backend/ user@123.45.67.89:/opt/silema/

# ç™»å½•æœåŠ¡å™¨å¹¶å¯åŠ¨
ssh user@123.45.67.89
cd /opt/silema/backend
npm install
pm2 start src/server.js --name silema
pm2 startup  # å¼€æœºè‡ªå¯
pm2 save     # ä¿å­˜é…ç½®
```

## éªŒè¯æµ‹è¯•

### æ‰‹æœºç«¯æµ‹è¯•

1. âœ… å®‰è£…APK
2. âœ… æ‰“å¼€åº”ç”¨
3. âœ… æ³¨å†Œè´¦æˆ·
4. âœ… ç­¾åˆ°æˆåŠŸ
5. âœ… é…ç½®SMTP
6. âœ… å‘é€æµ‹è¯•é‚®ä»¶
7. âœ… æ£€æŸ¥ç´§æ€¥è”ç³»äººé‚®ç®±

### æœåŠ¡å™¨ç«¯éªŒè¯

```bash
# æŸ¥çœ‹æ—¥å¿—
pm2 logs silema

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# é‡å¯æœåŠ¡
pm2 restart silema
```

## å¸¸è§é—®é¢˜

### Q: æ‰‹æœºæ— æ³•è¿æ¥æœåŠ¡å™¨ï¼Ÿ

**æ£€æŸ¥æ¸…å•:**
- [ ] æœåŠ¡å™¨é˜²ç«å¢™å·²å¼€æ”¾3000ç«¯å£
- [ ] APIåœ°å€æ­£ç¡®ï¼ˆåŒ…å«ç«¯å£ï¼‰
- [ ] æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆ`pm2 status`ï¼‰
- [ ] æ‰‹æœºèƒ½è®¿é—® `http://IP:3000/health`

### Q: è¿æ¥è¶…æ—¶ï¼Ÿ

```bash
# æ£€æŸ¥æœåŠ¡å™¨ç«¯å£æ˜¯å¦ç›‘å¬
netstat -tlnp | grep 3000

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status

# æµ‹è¯•æœ¬åœ°è¿æ¥
curl http://localhost:3000/health
```

### Q: åº”ç”¨å®‰è£…å¤±è´¥ï¼Ÿ

1. å…è®¸å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨
2. å¸è½½æ—§ç‰ˆæœ¬
3. é‡æ–°ä¼ è¾“APK

## å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### æ„å»ºä¸åŒç‰ˆæœ¬

```bash
# å¼€å‘ç‰ˆï¼ˆæ¨¡æ‹Ÿå™¨ï¼‰
flutter run

# ç”Ÿäº§ç‰ˆï¼ˆä½¿ç”¨IPï¼‰
./build.sh http://123.45.67.89:3000/api

# ç”Ÿäº§ç‰ˆï¼ˆä½¿ç”¨åŸŸåï¼‰
./build.sh https://api.yourdomain.com/api
```

### æœåŠ¡å™¨ç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
pm2 start src/server.js --name silema

# åœæ­¢æœåŠ¡
pm2 stop silema

# é‡å¯æœåŠ¡
pm2 restart silema

# æŸ¥çœ‹æ—¥å¿—
pm2 logs silema

# æ¸…ç©ºæ—¥å¿—
pm2 flush silema
```

## ä¸‹ä¸€æ­¥

éƒ¨ç½²æˆåŠŸåï¼š

1. âœ… åº”ç”¨å¯æ­£å¸¸ä½¿ç”¨
2. âœ… åç«¯24/7è¿è¡Œ
3. âœ… æ•°æ®æŒä¹…åŒ–ä¿å­˜
4. âœ… è‡ªåŠ¨å‘é€è­¦æŠ¥é‚®ä»¶

## æ–‡ä»¶ä½ç½®

- æ„å»ºè„šæœ¬: `build.sh`
- é…ç½®æ–‡ä»¶: `lib/config/app_config.dart`
- APKè¾“å‡º: `build/app/outputs/flutter-apk/app-release.apk`
- è¯¦ç»†æ–‡æ¡£: `DEPLOYMENT_PRODUCTION.md`

---

éœ€è¦å¸®åŠ©ï¼ŸæŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š`DEPLOYMENT_PRODUCTION.md` ğŸ“–
