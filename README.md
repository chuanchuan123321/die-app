# æ­»äº†å—

ä¸€æ¬¾æç®€ä¸»ä¹‰çš„æ¯æ—¥ç­¾åˆ°åº”ç”¨ï¼Œå¸¦æœ‰äº‘ç«¯åç«¯æ”¯æŒã€‚å¦‚æœè¶…è¿‡48å°æ—¶æœªç­¾åˆ°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘é€é‚®ä»¶é€šçŸ¥ä½ çš„ç´§æ€¥è”ç³»äººã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ¨ **ç²¾ç¾è®¾è®¡** - æç®€ç•Œé¢ï¼Œæ¸å˜è‰²å½©ï¼Œæµç•…åŠ¨ç”»
- â˜ï¸ **äº‘ç«¯æœåŠ¡** - ç‹¬ç«‹åç«¯æœåŠ¡å™¨ï¼Œæ— éœ€åº”ç”¨æ‰“å¼€å³å¯æ£€æŸ¥
- ğŸ”” **æ™ºèƒ½è­¦æŠ¥** - 48å°æ—¶æœªç­¾åˆ°è‡ªåŠ¨å‘é€é‚®ä»¶é€šçŸ¥
- ğŸ“Š **æ•°æ®ç»Ÿè®¡** - ç­¾åˆ°å¤©æ•°ç»Ÿè®¡ï¼Œå¯è§†åŒ–å±•ç¤º
- ğŸ” **å®‰å…¨å¯é ** - JWTè®¤è¯ï¼Œæ•°æ®åŠ å¯†å­˜å‚¨
- ğŸ“§ **SMTPæ”¯æŒ** - æ”¯æŒè‡ªå®šä¹‰é‚®ä»¶æœåŠ¡å™¨

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      APIè¯·æ±‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Flutter    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚  Node.js    â”‚
â”‚     App     â”‚                    â”‚   Backend   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚  SQLite DB  â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                  â”‚   é‚®ä»¶æœåŠ¡   â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1: æœ¬åœ°å¼€å‘

**åç«¯æœåŠ¡ï¼š**
```bash
cd backend
npm install
npm run dev
```

**Flutteråº”ç”¨ï¼š**
```bash
flutter pub get
flutter run
```

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [å¿«é€Ÿå¼€å§‹æŒ‡å—](QUICKSTART.md)

### æ–¹å¼2: ç”Ÿäº§éƒ¨ç½²

æŸ¥çœ‹å®Œæ•´éƒ¨ç½²æŒ‡å—ï¼š[DEPLOYMENT.md](DEPLOYMENT.md)

## ğŸ“ é¡¹ç›®ç»“æ„

```
silema/
â”œâ”€â”€ backend/                 # åç«¯APIæœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/         # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ server.js       # ä¸»æœåŠ¡å™¨
â”‚   â”œâ”€â”€ data/               # SQLiteæ•°æ®åº“ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ lib/                    # Flutteråº”ç”¨
â”‚   â”œâ”€â”€ pages/              # é¡µé¢
â”‚   â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â””â”€â”€ main.dart
â”œâ”€â”€ android/                # Androidé…ç½®
â”œâ”€â”€ DEPLOYMENT.md           # éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ QUICKSTART.md           # å¿«é€Ÿå¼€å§‹
â””â”€â”€ README.md
```

## ğŸ“± åŠŸèƒ½æˆªå›¾

### ä¸»é¡µé¢
- ç­¾åˆ°æŒ‰é’®
- æœ€åç­¾åˆ°æ—¶é—´
- çŠ¶æ€æŒ‡ç¤ºå™¨
- åŠ±å¿—åè¨€

### ç»Ÿè®¡é¡µé¢
- ç´¯è®¡ç­¾åˆ°å¤©æ•°
- æœ¬å‘¨/æœ¬æœˆç­¾åˆ°
- ç­¾åˆ°è¶‹åŠ¿

### è®¾ç½®é¡µé¢
- SMTPé‚®ä»¶é…ç½®
- ç´§æ€¥è”ç³»äººè®¾ç½®
- æµ‹è¯•é‚®ä»¶åŠŸèƒ½

## ğŸ”§ æŠ€æœ¯æ ˆ

**å‰ç«¯ï¼š**
- Flutter 3.10.7+
- Dart
- Material Design 3

**åç«¯ï¼š**
- Node.js 16+
- Express.js
- SQLite (better-sqlite3)
- JWTè®¤è¯
- Nodemailer
- node-cron (å®šæ—¶ä»»åŠ¡)

## ğŸ“– APIæ–‡æ¡£

### è®¤è¯æ¥å£

**æ³¨å†Œï¼š**
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123",
  "deviceId": "unique-device-id",
  "emergencyEmail": "emergency@example.com"
}
```

**ç™»å½•ï¼š**
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
```

### ç­¾åˆ°æ¥å£

**ç­¾åˆ°ï¼š**
```http
POST /api/checkin
Authorization: Bearer <token>
```

**è·å–ç»Ÿè®¡ï¼š**
```http
GET /api/checkin/stats
Authorization: Bearer <token>
```

æ›´å¤šAPIè¯¦æƒ…è¯·æŸ¥çœ‹ [backend/README.md](backend/README.md)

## âš™ï¸ é…ç½®è¯´æ˜

### åç«¯é…ç½®

ç¼–è¾‘ `backend/.env`ï¼š
```env
PORT=3000
JWT_SECRET=your-super-secret-jwt-key
NODE_ENV=production
```

### å‰ç«¯é…ç½®

ç¼–è¾‘ `lib/services/api_service.dart`ï¼š
```dart
static String baseUrl = 'http://your-server.com/api';
```

### SMTPé‚®ä»¶é…ç½®

åœ¨åº”ç”¨è®¾ç½®ä¸­é…ç½®ï¼š
- **ä¸»æœº**: smtp.gmail.com
- **ç«¯å£**: 587 æˆ– 465
- **ç”¨æˆ·å**: ä½ çš„é‚®ç®±
- **å¯†ç **: é‚®ç®±å¯†ç æˆ–åº”ç”¨ä¸“ç”¨å¯†ç 

**å¸¸è§é‚®ç®±SMTPé…ç½®ï¼š**

| é‚®ç®± | ä¸»æœº | ç«¯å£ | å¤‡æ³¨ |
|------|------|------|------|
| Gmail | smtp.gmail.com | 587 | éœ€åº”ç”¨ä¸“ç”¨å¯†ç  |
| QQé‚®ç®± | smtp.qq.com | 465 | éœ€æˆæƒç  |
| 163é‚®ç®± | smtp.163.com | 465 | éœ€æˆæƒç  |
| Outlook | smtp.office365.com | 587 | éœ€åº”ç”¨å¯†ç  |

## ğŸ”„ å·¥ä½œæµç¨‹

1. **ç”¨æˆ·æ³¨å†Œ**
   - å¡«å†™é‚®ç®±ã€å¯†ç 
   - è®¾ç½®ç´§æ€¥è”ç³»äºº

2. **é…ç½®SMTP**
   - åœ¨è®¾ç½®é¡µé¢é…ç½®é‚®ä»¶æœåŠ¡å™¨
   - å‘é€æµ‹è¯•é‚®ä»¶éªŒè¯

3. **æ¯æ—¥ç­¾åˆ°**
   - æ‰“å¼€Appç‚¹å‡»ç­¾åˆ°æŒ‰é’®
   - æ•°æ®ä¿å­˜åˆ°æœåŠ¡å™¨

4. **è‡ªåŠ¨æ£€æŸ¥**
   - åç«¯æ¯å°æ—¶æ£€æŸ¥æ‰€æœ‰ç”¨æˆ·
   - å‘ç°è¶…æ—¶ç”¨æˆ·è‡ªåŠ¨å‘é€è­¦æŠ¥

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

**åç«¯ï¼š**
```bash
cd backend
# æ·»åŠ è·¯ç”±
vim src/routes/your-route.js
# åœ¨server.jsä¸­å¼•å…¥è·¯ç”±
```

**å‰ç«¯ï¼š**
```bash
# æ·»åŠ æ–°é¡µé¢
flutter create lib/pages/your_page.dart
# åœ¨api_service.dartä¸­æ·»åŠ APIæ–¹æ³•
```

### è¿è¡Œæµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend
npm test

# å‰ç«¯æµ‹è¯•
flutter test
```

## ğŸ“¦ éƒ¨ç½²

### äº‘æœåŠ¡å™¨éƒ¨ç½²

æ¨èé…ç½®ï¼š
- CPU: 1æ ¸
- å†…å­˜: 512MB - 1GB
- ç³»ç»Ÿ: Ubuntu 20.04+

è¯¦ç»†æ­¥éª¤ï¼š[DEPLOYMENT.md](DEPLOYMENT.md)

### Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY backend/package*.json ./
RUN npm install --production
COPY backend/src ./src
EXPOSE 3000
CMD ["node", "src/server.js"]
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹JWTå¯†é’¥**
2. **ä½¿ç”¨HTTPSåŠ å¯†ä¼ è¾“**
3. **å®šæœŸå¤‡ä»½æ•°æ®åº“**
4. **é™åˆ¶APIè®¿é—®é¢‘ç‡**
5. **ä½¿ç”¨å¼ºå¯†ç ç­–ç•¥**

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨PM2ç®¡ç†Nodeè¿›ç¨‹
- å¯ç”¨Nginxåå‘ä»£ç†
- é…ç½®CDNåŠ é€Ÿé™æ€èµ„æº
- å®šæœŸæ¸…ç†æ—§ç­¾åˆ°è®°å½•

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: åç«¯å¯åŠ¨å¤±è´¥ï¼Ÿ**
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000
# æ£€æŸ¥Nodeç‰ˆæœ¬
node -v  # éœ€è¦16+
```

**Q: é‚®ä»¶å‘é€å¤±è´¥ï¼Ÿ**
- æ£€æŸ¥SMTPé…ç½®
- ç¡®è®¤é‚®ç®±å¼€å¯äº†SMTPæœåŠ¡
- ä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç 

**Q: APIè¿æ¥å¤±è´¥ï¼Ÿ**
- æ£€æŸ¥æœåŠ¡å™¨åœ°å€é…ç½®
- ç¡®è®¤é˜²ç«å¢™å¼€æ”¾ç«¯å£
- æŸ¥çœ‹åç«¯æ—¥å¿—

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (æœ€æ–°)
- âœ… æ–°å¢äº‘ç«¯åç«¯æœåŠ¡
- âœ… æ”¯æŒç”¨æˆ·æ³¨å†Œç™»å½•
- âœ… æœåŠ¡å™¨ç«¯å®šæ—¶æ£€æŸ¥
- âœ… å®Œæ•´çš„APIæ¥å£
- âœ… ä¼˜åŒ–UIåŠ¨ç”»æ•ˆæœ

### v1.0.0
- âœ… åŸºç¡€ç­¾åˆ°åŠŸèƒ½
- âœ… æœ¬åœ°å­˜å‚¨
- âœ… SMTPé‚®ä»¶å‘é€

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“§ è”ç³»æ–¹å¼

- é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/your-repo/silema/issues)
- é‚®ä»¶: your-email@example.com

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStarï¼
